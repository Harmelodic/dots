#!/bin/bash

export DOTS=~/dots

if [[ "$(uname)" =~ "Darwin" ]]; then
    # PS1="%n@%m %1~ $ " # name@machine directory $
    PS1="%1~ $ " # directory $
elif [[ "$(uname)" =~ "Linux" ]]; then
    PS1="\[\033[01;32m\]\u@\h\[\033[01;37m\] \W\[\033[01;32m\] \$\[\033[00m\] "
fi

# Custom commands
PATH="${DOTS}/bin:${PATH}"
export PATH

# Custom sourced commands
for file in "$DOTS/source-bin/"* ; do
    if [ -f "$file" ] ; then
        # shellcheck disable=SC1090
        source "$file"
    fi
done

# Make the command line have Vi functionality
set -o vi

# Aliases
alias spy='watch ' # Gets watch to support aliases with spy
alias ll='ls -lh'
alias la='ls -lah'
alias k='kubectl'
alias kx='kubectx'
alias cn='lima nerdctl'

# Git
git config --global core.excludesfile $DOTS/config-files/.gitignore
git config --global core.editor vim
git config --global core.ignorecase true
git config --global gpg.program gpg
git config --global pull.rebase false
git config --global init.defaultBranch main

GPG_TTY=$(tty)
export GPG_TTY

if [[ "$(uname)" =~ "Darwin" ]]; then
    git config --global credential.helper osxkeychain # Permanent cache
elif [[ "$(uname)" =~ "Linux" ]]; then
    git config --global credential.helper 'cache --timeout=86400' # 24 hour cache
fi
